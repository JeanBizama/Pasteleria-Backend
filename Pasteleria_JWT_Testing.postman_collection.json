{
  "info": {
    "name": "Pastelería JWT - Testing",
    "description": "Colección simplificada para testear JWT",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "1. Registrar Usuario",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"nombre\": \"Juan Pérez\",\n  \"email\": \"juan@example.com\",\n  \"password\": \"password123\",\n  \"fechaNacimiento\": \"1990-05-15\",\n  \"rol\": \"CLIENTE\"\n}"
        },
        "url": {
          "raw": "http://localhost:8080/api/v1/auth/register",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8080",
          "path": ["api", "v1", "auth", "register"]
        },
        "description": "Registra un nuevo usuario y devuelve un token JWT"
      }
    },
    {
      "name": "2. Login",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"email\": \"juan@example.com\",\n  \"password\": \"password123\"\n}"
        },
        "url": {
          "raw": "http://localhost:8080/api/v1/auth/login",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8080",
          "path": ["api", "v1", "auth", "login"]
        },
        "description": "Inicia sesión y devuelve un token JWT"
      }
    },
    {
      "name": "3. Ver Productos (público)",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8080/api/productos",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8080",
          "path": ["api", "productos"]
        },
        "description": "Endpoint público - no requiere token"
      }
    },
    {
      "name": "4. Ver Boletas (protegido)",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{token}}",
            "description": "Token JWT obtenido en login"
          }
        ],
        "url": {
          "raw": "http://localhost:8080/api/boletas",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8080",
          "path": ["api", "boletas"]
        },
        "description": "Requiere autenticación - usar token del login"
      }
    },
    {
      "name": "5. Crear Categoría (ADMIN)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}",
            "description": "Token de usuario con rol ADMIN"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"nombre\": \"Pasteles Especiales\"\n}"
        },
        "url": {
          "raw": "http://localhost:8080/api/categorias",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8080",
          "path": ["api", "categorias"]
        },
        "description": "Solo usuarios con rol ADMIN pueden crear categorías"
      }
    }
  ],
  "variable": [
    {
      "key": "token",
      "value": "",
      "type": "string"
    }
  ]
}
